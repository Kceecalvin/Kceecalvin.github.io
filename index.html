<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kencalvin Mwenda - Full-Stack Developer & AI Advocate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>

    <style>
        /* Base styles and theme setup */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e5e7eb;
            overflow-x: hidden;
            cursor: none; /* Hide the default cursor */
        }
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .glass-card {
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .section-heading {
            color: #f3f4f6;
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }
        /* Custom animated cursor styles */
        .cursor {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.15s ease-out, opacity 0.2s ease-out;
            will-change: transform;
        }
        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: #8b5cf6;
            border-radius: 50%;
        }
        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 2px solid #8b5cf6;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s ease-out;
        }
        .cursor-outline.hovered {
            width: 60px;
            height: 60px;
            background-color: rgba(139, 92, 246, 0.2);
        }
        /* Preloader styles */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0a0a0a;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.5s ease 1s;
        }
        #preloader.loaded {
            opacity: 0;
            pointer-events: none;
        }
        .loader-text {
            font-size: 2rem;
            font-weight: 900;
            color: #fff;
            opacity: 0;
            animation: fadeInOut 2.5s ease-in-out forwards;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.9); }
            25%, 75% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.9); }
        }
        /* Scroll reveal animation */
        .scroll-animate {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Project card 3D tilt effect */
        .project-card {
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            margin: auto;
            max-width: 900px;
            width: 90%;
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Custom Cursor -->
    <div class="cursor cursor-dot"></div>
    <div class="cursor cursor-outline"></div>

    <!-- Preloader -->
    <div id="preloader">
        <div class="loader-text">Kencalvin</div>
    </div>

    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <!-- Main Content Container -->
    <div id="main-content" class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 invisible">
        
        <!-- Header & Navigation -->
        <header class="py-6">
            <nav class="flex justify-between items-center">
                <a href="#" class="magnetic-link text-2xl font-black text-white hover:text-indigo-400 transition">KC.</a>
                <ul class="hidden md:flex space-x-8">
                    <li><a href="#about" class="magnetic-link text-lg font-medium text-gray-300 hover:text-white transition">About</a></li>
                    <li><a href="#projects" class="magnetic-link text-lg font-medium text-gray-300 hover:text-white transition">Projects</a></li>
                    <li><a href="#skills" class="magnetic-link text-lg font-medium text-gray-300 hover:text-white transition">Skills</a></li>
                    <li><a href="https://github.com/Kceecalvin" target="_blank" class="magnetic-link text-lg font-medium text-gray-300 hover:text-white transition">GitHub</a></li>
                    <li><a href="#contact" class="magnetic-link text-lg font-medium text-gray-300 hover:text-white transition">Contact</a></li>
                </ul>
            </nav>
        </header>

        <!-- Hero Section -->
        <section class="h-screen min-h-[700px] flex flex-col justify-center items-center text-center -mt-20">
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-black text-white leading-tight">
                Kencalvin Mwenda
            </h1>
            <p class="mt-4 text-xl md:text-2xl text-indigo-300">
                <span id="typing-text"></span><span class="animate-ping">|</span>
            </p>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 my-20 scroll-animate">
            <h2 class="section-heading text-4xl font-bold mb-12 text-center">About Me</h2>
            <div class="glass-card rounded-xl p-8 md:p-12 grid grid-cols-1 md:grid-cols-3 gap-12 items-center">
                <div class="md:col-span-1 flex justify-center">
                    <!-- THIS IS THE AVATAR IMAGE -->
                    <img src="assets/profile.png" alt="Kencalvin Mwenda" class="rounded-full w-48 h-48 md:w-64 md:h-64 object-cover border-4 border-indigo-500">
                </div>
                <div class="md:col-span-2 text-lg text-gray-300 space-y-4">
                    <p>Hello! I'm Kencalvin, a passionate software engineering student at Kirinyaga University. With two years of hands-on experience as a full-stack developer, my mission is to build solutions that make a difference.</p>
                    <p>I'm deeply interested in the intersection of robust backend systems and intuitive user experiences. My journey has taken me through PHP with Laravel, Python with Django, and modern frontend technologies. I'm also a strong advocate for AI and am actively exploring how to leverage machine learning to create smarter, more efficient applications.</p>
                    <p>My goal is to create technology that empowers people and solves real-world problems.</p>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-20 scroll-animate">
            <h2 class="section-heading text-4xl font-bold mb-12 text-center">Featured Projects</h2>
            <div id="projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Projects will be dynamically inserted here -->
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="py-20 scroll-animate">
            <h2 class="section-heading text-4xl font-bold mb-12 text-center">My Tech Stack</h2>
            <div id="skills-container" class="glass-card rounded-xl p-8 md:p-12 flex flex-wrap justify-center items-center gap-8">
                <!-- Skills will be dynamically inserted here -->
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 scroll-animate">
            <h2 class="section-heading text-4xl font-bold mb-12 text-center">Get In Touch</h2>
            <div class="glass-card max-w-2xl mx-auto rounded-xl p-8 md:p-12">
                <p class="text-center text-lg text-gray-300 mb-8">Have a project idea or just want to connect? Feel free to send me a message. I'm always open to discussing new opportunities.</p>
                <form id="contact-form" action="https://formspree.io/f/xpwjlrpj" method="POST" class="space-y-6">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <textarea name="message" placeholder="Your Message" rows="5" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                    <button type="submit" class="magnetic-link w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">Send Message</button>
                </form>
                 <p id="form-status" class="text-center mt-4"></p>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="text-center py-8 text-gray-500">
            <p>&copy; 2024 Kencalvin Mwenda. Crafted with passion and code.</p>
        </footer>

    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="modal">
      <div id="modal-content" class="modal-content glass-card rounded-xl">
        <!-- Modal content will be dynamically inserted here -->
      </div>
    </div>


    <script>
    /**
     * ===================================================================
     * Main Portfolio Application Script
     * ===================================================================
     * This script handles all the dynamic and interactive features of the portfolio, including:
     * - 3D background rendering with Three.js and a bloom effect.
     * - A custom animated cursor that reacts to interactive elements.
     * - Preloader animation for a polished loading experience.
     * - "Magnetic" effect for buttons and links.
     * - Scroll-triggered animations for content sections.
     * - Dynamic rendering of project and skill data.
     * - Project modals for detailed views.
     * - A "typing" effect for the hero section subtitle.
     * - Contact form submission handling.
     * * All components are documented to explain their purpose and functionality.
     */
    document.addEventListener('DOMContentLoaded', () => {

        // --- CORE VARIABLES & STATE ---
        const isMobile = window.innerWidth < 768;

        // --- PRELOADER ---
        /**
         * @function handlePreloader
         * Manages the preloader animation and reveals the main content when the window is loaded.
         */
        function handlePreloader() {
            const preloader = document.getElementById('preloader');
            const mainContent = document.getElementById('main-content');
            window.addEventListener('load', () => {
                setTimeout(() => {
                    preloader.classList.add('loaded');
                    mainContent.classList.remove('invisible');
                }, 500); // Ensures loader animation runs for a bit
            });
        }

        // --- THREE.JS 3D BACKGROUND ---
        /**
         * @function init3DBackground
         * Sets up the entire Three.js scene, including camera, renderer, the 3D object (TorusKnot),
         * lighting, and the UnrealBloomPass for the glowing effect. It also handles mouse
         * interaction to rotate the object and resizes the canvas on window resize.
         */
        function init3DBackground() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const canvas = document.getElementById('bg-canvas');
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // Create the central 3D object - a TorusKnot for a complex, techy look
            const geometry = new THREE.TorusKnotGeometry(10, 3, 100, 16);
            const material = new THREE.MeshBasicMaterial({ color: 0x8b5cf6, wireframe: true });
            const torusKnot = new THREE.Mesh(geometry, material);
            torusKnot.scale.set(0.1, 0.1, 0.1); // Scale it down to fit the scene
            scene.add(torusKnot);

            camera.position.z = 30;

            // Post-processing for the "bloom" (glow) effect
            const renderScene = new THREE.RenderPass(scene, camera);
            const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
            bloomPass.threshold = 0;
            bloomPass.strength = 1.2; // Adjust for more/less glow
            bloomPass.radius = 0;

            const composer = new THREE.EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);

            // Mouse interaction variables
            let mouseX = 0, mouseY = 0;
            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
            });
            
            // Animation loop to render the scene
            function animate() {
                requestAnimationFrame(animate);
                // Subtle rotation
                torusKnot.rotation.x += 0.001;
                torusKnot.rotation.y += 0.001;
                // Mouse follow effect
                torusKnot.rotation.y += (mouseX - torusKnot.rotation.y) * 0.01;
                torusKnot.rotation.x += (mouseY - torusKnot.rotation.x) * 0.01;
                
                composer.render();
            }
            
            // Handle window resizing
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                composer.setSize(window.innerWidth, window.innerHeight);
            });

            animate();
        }

        // --- CUSTOM CURSOR ---
        /**
         * @function initCustomCursor
         * Creates and manages the custom cursor elements (dot and outline).
         * It updates their position on mouse move and adds a 'hovered' class
         * to the outline when hovering over interactive elements for visual feedback.
         */
        function initCustomCursor() {
            const cursorDot = document.querySelector('.cursor-dot');
            const cursorOutline = document.querySelector('.cursor-outline');

            window.addEventListener('mousemove', (e) => {
                const posX = e.clientX;
                const posY = e.clientY;

                cursorDot.style.left = `${posX}px`;
                cursorDot.style.top = `${posY}px`;

                cursorOutline.animate({
                    left: `${posX}px`,
                    top: `${posY}px`
                }, { duration: 500, fill: "forwards" });
            });

            const interactiveElements = document.querySelectorAll('a, button, input, textarea, .project-card, .skill-icon');
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => cursorOutline.classList.add('hovered'));
                el.addEventListener('mouseleave', () => cursorOutline.classList.remove('hovered'));
            });
        }
        
        // --- MAGNETIC ELEMENTS ---
        /**
         * @function initMagneticLinks
         * Applies a "magnetic" effect to elements with the 'magnetic-link' class.
         * When the mouse approaches, the element moves towards the cursor for a nice interactive feel.
         */
        function initMagneticLinks() {
            if (isMobile) return; // Disable on mobile
            const magnets = document.querySelectorAll('.magnetic-link');
            const strength = 50;

            magnets.forEach((magnet) => {
                magnet.addEventListener('mousemove', function(e) {
                    const pos = magnet.getBoundingClientRect();
                    const x = e.clientX - pos.left - pos.width / 2;
                    const y = e.clientY - pos.top - pos.height / 2;
                    
                    magnet.style.transform = `translate(${x * 0.3}px, ${y * 0.5}px)`;
                });

                magnet.addEventListener('mouseout', function() {
                    magnet.style.transform = 'translate(0px, 0px)';
                });
            });
        }
        
        // --- SCROLL ANIMATIONS ---
        /**
         * @function initScrollAnimations
         * Uses IntersectionObserver to detect when elements with the 'scroll-animate' class
         * enter the viewport, adding a 'visible' class to trigger a fade-in-up animation.
         */
        function initScrollAnimations() {
            const animatedElements = document.querySelectorAll('.scroll-animate');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            animatedElements.forEach(el => observer.observe(el));
        }

        // --- HERO TYPING EFFECT ---
        /**
         * @function initTypingEffect
         * Creates a typewriter effect for the hero subtitle, cycling through a list of roles.
         */
        function initTypingEffect() {
            const typingText = document.getElementById('typing-text');
            const roles = ["Full-Stack Developer", "PHP & Laravel Expert", "Python & Django Dev", "AI Advocate"];
            let roleIndex = 0;
            let charIndex = 0;
            let isDeleting = false;

            function type() {
                const currentRole = roles[roleIndex];
                let displayText = '';

                if (isDeleting) {
                    displayText = currentRole.substring(0, charIndex - 1);
                    charIndex--;
                } else {
                    displayText = currentRole.substring(0, charIndex + 1);
                    charIndex++;
                }

                typingText.textContent = displayText;

                let typeSpeed = isDeleting ? 100 : 200;

                if (!isDeleting && charIndex === currentRole.length) {
                    typeSpeed = 2000; // Pause at end of word
                    isDeleting = true;
                } else if (isDeleting && charIndex === 0) {
                    isDeleting = false;
                    roleIndex = (roleIndex + 1) % roles.length;
                    typeSpeed = 500; // Pause before new word
                }

                setTimeout(type, typeSpeed);
            }
            type();
        }

        // --- DYNAMIC DATA RENDERING ---
        /**
         * Holds the data for projects and skills. This makes it easy to update content
         * without touching the HTML structure.
         */
        const projectsData = [
            {
                title: "Asset Registry Platform",
                category: "Web Application (Laravel & Blade)",
                imageUrl: "https://placehold.co/600x400/0a0a0a/8b5cf6?text=Asset+Registry",
                description: "This project is a generalized, template version of a complex internal asset registry system I developed professionally. To respect confidentiality, I've rebuilt the core logic from scratch using mock data. It showcases my ability to design scalable database schemas, implement robust CRUD functionalities, and build secure, multi-user authentication systems. The platform allows organizations to track, manage, and report on their physical and digital assets efficiently.",
                details: [
                    "Full CRUD functionality for asset management.",
                    "Role-based access control (Admin, Manager, User).",
                    "Advanced search and filtering capabilities.",
                    "Secure user authentication and authorization.",
                    "Built with PHP, Laravel, and Blade templating."
                ],
                liveLink: "#",
                repoLink: "#"
            },
            {
                title: "E-commerce Site",
                category: "Web Application (Python & Django)",
                imageUrl: "https://placehold.co/600x400/0a0a0a/8b5cf6?text=E-commerce",
                description: "A full-featured e-commerce platform built with Django. It includes product catalogs, a shopping cart, user accounts, and order management. This project demonstrates my expertise in building complex, data-driven web applications with a focus on security and performance.",
                details: [
                    "Product and category management.",
                    "User authentication and profile management.",
                    "Shopping cart and checkout functionality.",
                    "Integration with a payment gateway (mocked).",
                    "Developed using Python, Django, and PostgreSQL."
                ],
                liveLink: "#",
                repoLink: "#"
            },
            {
                title: "Personal Blog",
                category: "Web Development (Node.js & Tailwind)",
                imageUrl: "https://placehold.co/600x400/0a0a0a/8b5cf6?text=Blog",
                description: "A dynamic personal blog platform created with Node.js and Express for the backend, and styled with Tailwind CSS on the frontend. It features a simple markdown-based editor for writing posts and a clean, responsive interface for readers. This project highlights my skills in building RESTful APIs and working with NoSQL databases.",
                details: [
                    "RESTful API for managing posts.",
                    "Markdown support for post content.",
                    "User comments and interactions.",
                    "Clean, mobile-first design with Tailwind CSS.",
                    "Backend built with Node.js, Express, and MongoDB."
                ],
                liveLink: "#",
                repoLink: "#"
            }
        ];

        const skillsData = [
            { name: 'PHP', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg' },
            { name: 'Laravel', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/laravel/laravel-plain.svg' },
            { name: 'Python', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg' },
            { name: 'Django', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/django/django-plain.svg' },
            { name: 'JavaScript', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg' },
            { name: 'Node.js', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg' },
            { name: 'Tailwind CSS', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-plain.svg' },
            { name: 'MySQL', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original-wordmark.svg' },
            { name: 'Git', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg' },
            { name: 'GitHub', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg' },
            { name: 'TensorFlow', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tensorflow/tensorflow-original.svg' },
            { name: 'PyTorch', icon: 'https://cdn.jsdelivr.net/gh/devicons/devicon/icons/pytorch/pytorch-original.svg' },
        ];
        
        /**
         * @function renderProjects
         * Dynamically creates and injects project cards into the DOM from the projectsData array.
         */
        function renderProjects() {
            const container = document.getElementById('projects-container');
            container.innerHTML = projectsData.map((project, index) => `
                <div class="project-card glass-card rounded-lg overflow-hidden cursor-pointer" data-tilt data-tilt-max="10" data-tilt-scale="1.05" data-project-index="${index}">
                    <img src="${project.imageUrl}" alt="${project.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-white">${project.title}</h3>
                        <p class="text-indigo-300 mt-1">${project.category}</p>
                        <button data-project-index="${index}" class="open-modal-btn mt-4 text-white font-semibold">View Details &rarr;</button>
                    </div>
                </div>
            `).join('');
        }

        /**
         * @function renderSkills
         * Dynamically creates and injects skill icons into the DOM from the skillsData array.
         */
        function renderSkills() {
            const container = document.getElementById('skills-container');
            container.innerHTML = skillsData.map(skill => `
                <div class="skill-icon text-center transition-transform hover:scale-110" title="${skill.name}">
                    <img src="${skill.icon}" alt="${skill.name}" class="h-16 w-16 mx-auto">
                    <p class="mt-2 text-sm text-gray-300">${skill.name}</p>
                </div>
            `).join('');
        }
        
        // --- PROJECT MODAL LOGIC ---
        /**
         * @function initProjectModals
         * Handles the opening and closing of the project detail modal.
         * It populates the modal with the correct project data based on the clicked card.
         */
        function initProjectModals() {
            const modal = document.getElementById('project-modal');
            const modalContent = document.getElementById('modal-content');
            
            document.body.addEventListener('click', (e) => {
                const openBtn = e.target.closest('.project-card, .open-modal-btn');
                if (openBtn) {
                    const projectIndex = openBtn.dataset.projectIndex;
                    const project = projectsData[projectIndex];
                    
                    modalContent.innerHTML = `
                        <div class="p-6 md:p-8">
                            <div class="flex justify-between items-start">
                                <h2 class="text-3xl font-bold text-white mb-4">${project.title}</h2>
                                <button id="close-modal" class="text-4xl text-gray-400 hover:text-white">&times;</button>
                            </div>
                            <img src="${project.imageUrl}" alt="${project.title}" class="w-full h-64 object-cover rounded-lg mb-6">
                            <p class="text-gray-300 mb-6">${project.description}</p>
                            <h3 class="text-xl font-semibold text-white mb-3">Key Features:</h3>
                            <ul class="list-disc list-inside text-gray-300 space-y-2 mb-6">
                                ${project.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                            <div class="flex flex-wrap gap-4">
                                <a href="${project.liveLink}" target="_blank" class="magnetic-link bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition">View Live Site</a>
                                <a href="${project.repoLink}" target="_blank" class="magnetic-link bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition">View Code</a>
                            </div>
                        </div>
                    `;
                    modal.style.display = 'flex';
                }

                if (e.target.id === 'close-modal' || e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
        
        // --- CONTACT FORM HANDLING ---
        /**
         * @function handleContactForm
         * Manages the contact form submission using Formspree. It prevents the default
         * form submission, sends the data via AJAX, and displays a success or error message.
         */
        function handleContactForm() {
            const form = document.getElementById('contact-form');
            const status = document.getElementById('form-status');
            
            async function handleSubmit(event) {
                event.preventDefault();
                const data = new FormData(event.target);
                fetch(event.target.action, {
                    method: form.method,
                    body: data,
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        status.textContent = "Thanks for your message!";
                        status.style.color = 'rgb(74 222 128)';
                        form.reset();
                    } else {
                        response.json().then(data => {
                            if (Object.hasOwn(data, 'errors')) {
                                status.textContent = data["errors"].map(error => error["message"]).join(", ");
                            } else {
                                status.textContent = "Oops! There was a problem submitting your form";
                            }
                             status.style.color = 'rgb(248 113 113)';
                        });
                    }
                }).catch(error => {
                    status.textContent = "Oops! There was a problem submitting your form";
                    status.style.color = 'rgb(248 113 113)';
                });
            }
            form.addEventListener("submit", handleSubmit);
        }

        // --- 3D TILT EFFECT FOR CARDS ---
        /**
         * @function initTiltEffect
         * Applies a 3D tilt effect to project cards for a more dynamic feel on desktop.
         */
        function initTiltEffect() {
            if (isMobile) return;
            const tiltElements = document.querySelectorAll("[data-tilt]");
            
            tiltElements.forEach(el => {
                const maxTilt = parseInt(el.dataset.tiltMax) || 20;
                const scale = parseFloat(el.dataset.tiltScale) || 1.0;
                
                el.addEventListener("mousemove", (e) => {
                    const rect = el.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const width = rect.width;
                    const height = rect.height;
                    
                    const rotateX = -((y / height) - 0.5) * maxTilt;
                    const rotateY = ((x / width) - 0.5) * maxTilt;
                    
                    el.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(${scale}, ${scale}, ${scale})`;
                });
                
                el.addEventListener("mouseleave", () => {
                    el.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)`;
                });
            });
        }

        // --- INITIALIZATION ---
        // Run all initialization functions to bring the page to life.
        handlePreloader();
        init3DBackground();
        renderProjects();
        renderSkills();
        initCustomCursor();
        initMagneticLinks();
        initScrollAnimations();
        initTypingEffect();
        initProjectModals();
        handleContactForm();
        
        // This needs to be called after projects are rendered
        // to attach listeners to the dynamic cards.
        setTimeout(() => {
            initTiltEffect();
        }, 100); 

    });
    </script>
</body>
</html>

